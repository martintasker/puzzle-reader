{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 237327db4475187db365","webpack:///./src/puzzle-reader.js","webpack:///external \"marked\""],"names":["PuzzleReader","mdString","htmlString","h1Sections","_geth1Sections","rubric","join","puzzle","text","_getPuzzleSections","lines","split","output","outLabel","forEach","line","h1Label","rx","matches","match","push","puzzleHTML","html","sections","paraSections","map","section","filter","res","i","length","para","p"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;ACtCA;;;;;;;;KAEMA,Y;AACJ,yBAAYC,QAAZ,EAAsB;AAAA;;AACpB,UAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAMC,aAAa,sBAAOD,QAAP,CAAnB;AACA,SAAME,aAAa,KAAKC,cAAL,CAAoBF,UAApB,CAAnB;AACA,UAAKG,MAAL,GAAcF,WAAWE,MAAX,CAAkBC,IAAlB,CAAuB,EAAvB,CAAd;AACA,UAAKC,MAAL,GAAc,EAACC,MAAM,KAAKC,kBAAL,CAAwBN,WAAWI,MAAnC,CAAP,EAAd;AACD;;;;oCAEcL,U,EAAY;AACzB,WAAMQ,QAAQR,WAAWS,KAAX,CAAiB,IAAjB,CAAd;AACA,WAAMC,SAAS,EAACP,QAAQ,EAAT,EAAaE,QAAQ,EAArB,EAAf;AACA,WAAIM,WAAW,EAAf;AACAH,aAAMI,OAAN,CAAc,UAASC,IAAT,EAAe;AAC3B,aAAI,CAACA,IAAL,EAAW;AACT;AACD;AACD,aAAIC,UAAW,UAACD,IAAD,EAAU;AACvB,eAAME,KAAK,0BAAX;AACA,eAAMC,UAAUH,KAAKI,KAAL,CAAWF,EAAX,CAAhB;AACA,eAAI,CAACC,OAAL,EAAc;AACZ,oBAAO,EAAP;AACD;AACD,kBAAOA,QAAQ,CAAR,CAAP;AACD,UAPa,CAOXH,IAPW,CAAd;AAQA,aAAIC,OAAJ,EAAa;AACXH,sBAAWG,OAAX;AACAJ,kBAAOC,QAAP,IAAmBD,OAAOC,QAAP,KAAoB,EAAvC;AACA;AACD;AACD,aAAIA,QAAJ,EAAc;AACZD,kBAAOC,QAAP,EAAiBO,IAAjB,CAAsBL,IAAtB;AACD;AACF,QApBD;AAqBA,cAAOH,MAAP;AACD;;;wCAEkBS,U,EAAY;AAC7B,WAAMC,OAAOD,WAAWf,IAAX,CAAgB,GAAhB,CAAb;AACA,WAAMiB,WAAWD,KAAKX,KAAL,CAAW,oBAAX,CAAjB;AACA,WAAMa,eAAeD,SAASE,GAAT,CAAa;AAAA,gBAAWC,QAAQf,KAAR,CAAc,QAAd,EAAwBgB,MAAxB,CAA+B;AAAA,kBAAQZ,SAAO,EAAP,IAAaA,SAAO,GAA5B;AAAA,UAA/B,CAAX;AAAA,QAAb,CAArB;AACA,WAAIa,MAAM,EAAV;AACA,YAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAEN,SAASO,MAA3B,EAAmC,EAAED,CAArC,EAAwC;AACtC,aAAIA,IAAE,CAAN,EAAS;AACPD,eAAIR,IAAJ,CAAS,IAAT;AACD;AACDI,sBAAaK,CAAb,EAAgBf,OAAhB,CAAwB,UAASiB,IAAT,EAAe;AACrCH,eAAIR,IAAJ,CAAS,EAACY,GAAGD,IAAJ,EAAT;AACD,UAFD;AAGD;AACD,cAAOH,GAAP;AACD;;;iCAEW;AACV,cAAO,KAAKrB,MAAZ;AACD;;;iCAEW;AACV,cAAO,KAAKF,MAAZ;AACD;;;;;;mBAGYL,Y;;;;;;AChEf,gD","file":"puzzle-reader.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"marked\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"marked\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PuzzleReader\"] = factory(require(\"marked\"));\n\telse\n\t\troot[\"PuzzleReader\"] = factory(root[\"marked\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 237327db4475187db365","import marked from 'marked';\n\nclass PuzzleReader {\n  constructor(mdString) {\n    this.mdString = mdString;\n    const htmlString = marked(mdString);\n    const h1Sections = this._geth1Sections(htmlString);\n    this.rubric = h1Sections.rubric.join('');\n    this.puzzle = {text: this._getPuzzleSections(h1Sections.puzzle)};\n  };\n\n  _geth1Sections(htmlString) {\n    const lines = htmlString.split('\\n');\n    const output = {rubric: [], puzzle: []};\n    var outLabel = \"\";\n    lines.forEach(function(line) {\n      if (!line) {\n        return;\n      }\n      var h1Label = ((line) => {\n        const rx = /<h1 id=\\\"(.*)?\\\".*<\\/h1>/\n        const matches = line.match(rx);\n        if (!matches) {\n          return \"\";\n        }\n        return matches[1];\n      })(line);\n      if (h1Label) {\n        outLabel = h1Label;\n        output[outLabel] = output[outLabel] || [];\n        return;\n      }\n      if (outLabel) {\n        output[outLabel].push(line);\n      }\n    });\n    return output;\n  }\n\n  _getPuzzleSections(puzzleHTML) {\n    const html = puzzleHTML.join(' ');\n    const sections = html.split(/<h2.*section<\\/h2>/);\n    const paraSections = sections.map(section => section.split(/<\\/?p>/).filter(line => line!==\"\" && line!==\" \"));\n    var res = [];\n    for (var i = 0; i<sections.length; ++i) {\n      if (i>0) {\n        res.push(\"br\");\n      }\n      paraSections[i].forEach(function(para) {\n        res.push({p: para});\n      });\n    }\n    return res;\n  }\n\n  getPuzzle() {\n    return this.puzzle;\n  }\n\n  getRubric() {\n    return this.rubric;\n  }\n}\n\nexport default PuzzleReader;\n\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle-reader.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"marked\"\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}